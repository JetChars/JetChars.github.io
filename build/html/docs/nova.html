

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Nova &mdash; JetChars alpha documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="JetChars alpha documentation" href="../index.html"/>
        <link rel="next" title="Sahara" href="sahara/index.html"/>
        <link rel="prev" title="OpenStack" href="openstack/index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> JetChars
          

          
          </a>

          
            
            
              <div class="version">
                0.1.7
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="cloud_computing.html">Cloud Computing</a></li>
<li class="toctree-l1"><a class="reference internal" href="aws/index.html">AWS &#8211; Amazon Web Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="aws_vpn/index.html">Build VPN with AWS</a></li>
<li class="toctree-l1"><a class="reference internal" href="docker/index.html">Docker</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="ceph/ceph.html">Ceph</a></li>
<li class="toctree-l1"><a class="reference internal" href="ceph/ceph_deploy.html">Ceph Deploy</a></li>
<li class="toctree-l1"><a class="reference internal" href="ceph/ceph_issues.html">Ceph Issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="ceph/ceph_management_platforms.html">Ceph Management Platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="ceph/ceph_openstack.html">Ceph w/ OpenStack</a></li>
<li class="toctree-l1"><a class="reference internal" href="ceph/ceph_ops.html">Ceph Operation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="web/bootstrap.html">bootstrap</a></li>
<li class="toctree-l1"><a class="reference internal" href="web/html.html">HTML</a></li>
<li class="toctree-l1"><a class="reference internal" href="web/web.html">Web Server</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="openstack/index.html">OpenStack</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Nova</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">nova-docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="#nova-rootwrap">nova-rootwrap</a></li>
<li class="toctree-l2"><a class="reference internal" href="#management">Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#secgroup">SecGroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#keypair">KeyPair</a></li>
<li class="toctree-l3"><a class="reference internal" href="#flavor">Flavor</a></li>
<li class="toctree-l3"><a class="reference internal" href="#instances">Instances</a></li>
<li class="toctree-l3"><a class="reference internal" href="#services">Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="#quota">quota</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#issues">issues</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="sahara/index.html">Sahara</a></li>
<li class="toctree-l1"><a class="reference internal" href="kvm_optimization/index.html">KVM Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="devstack/index.html">DevStack</a></li>
<li class="toctree-l1"><a class="reference internal" href="devstack_dvr/index.html">DevStack with DVR</a></li>
<li class="toctree-l1"><a class="reference internal" href="devstack_t13g/index.html">DevStack Trouble Shooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="o7k_docker/index.html">OpenStack &amp; Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="osp7_director.html">OpenStack Platform 7 Director</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="hadoop/index.html">Hadoop</a></li>
<li class="toctree-l1"><a class="reference internal" href="hadoop_conf_tuning/index.html">Hadoop Configuration Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="hadoop_hibench/index.html">HiBench - The Hadoop BenchMark Suit</a></li>
<li class="toctree-l1"><a class="reference internal" href="doopshot/index.html">DoopShot</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="linux/freebsd.html">FreeBSD</a></li>
<li class="toctree-l1"><a class="reference internal" href="linux/linux.html">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="linux/linux_disk.html">Linux Disk</a></li>
<li class="toctree-l1"><a class="reference internal" href="linux/linux_doc.html">Documentation Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="linux/linux_info.html">Get System Infos</a></li>
<li class="toctree-l1"><a class="reference internal" href="linux/linux_mon.html">Linux Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="linux/linux_net.html">Linux Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="linux/linux_pkg.html">Linux Package Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="linux/linux_virt.html">Virtualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="linux/shell.html">Shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="linux/ubuntu.html">Ubuntu</a></li>
<li class="toctree-l1"><a class="reference internal" href="pxe/index.html">PXE &#8211; Preboot Execution Enviriment</a></li>
<li class="toctree-l1"><a class="reference internal" href="screen/index.html">Screen - Full-screen window manager</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="git.html">Git &#8211; Extraordinary version contrl software</a></li>
<li class="toctree-l1"><a class="reference internal" href="github/index.html">GitHub &#8211; Git repository hosting service</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="regex/index.html">Regular Expression</a></li>
<li class="toctree-l1"><a class="reference internal" href="sql/index.html">SQL &#8211; Structured Query Language</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="rst.html">reStructured Text (rst)</a></li>
<li class="toctree-l1"><a class="reference internal" href="md.html">MarkDown (md)</a></li>
<li class="toctree-l1"><a class="reference internal" href="svg/index.html">Scalable Vector Graphics (SVG)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="netease_homework/os.html">Operating System</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="sort.html">Sorting</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_structure.html">Review DataStructure with Pics</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="amqp/index.html">AMQP &#8211; Advanced Message Queuing Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="rest.html">RESTful API</a></li>
<li class="toctree-l1"><a class="reference internal" href="microservices/index.html">MicroServices</a></li>
<li class="toctree-l1"><a class="reference internal" href="windows/index.html">Windows</a></li>
<li class="toctree-l1"><a class="reference internal" href="mac.html">Mac as Main OS</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="kickstart/index.html">Kickstart Documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">JetChars</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li>Nova</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/docs/nova.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="nova">
<h1>Nova<a class="headerlink" href="#nova" title="Permalink to this headline">Â¶</a></h1>
<p>nova can use multiple virt driver, but not mature yet</p>
<div class="sidebar">
<p class="first sidebar-title">Terms</p>
<div class="last line-block">
<div class="line"><strong>BM, BareMetal</strong> &#8211; Physical Machine</div>
</div>
</div>
<div class="section" id="id1">
<h2><a class="reference external" href="https://wiki.openstack.org/wiki/Docker">nova-docker</a><a class="headerlink" href="#id1" title="Permalink to this headline">Â¶</a></h2>
</div>
<div class="section" id="nova-rootwrap">
<h2>nova-rootwrap<a class="headerlink" href="#nova-rootwrap" title="Permalink to this headline">Â¶</a></h2>
<p>Root wrapper, provide nova an option other than sudo, make sure nova can only able run cmds matches specified filters:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>nova-rootwrap conf-file cmd
</pre></div>
</div>
<ul>
<li><dl class="first docutils">
<dt>conf file:</dt>
<dd><ul class="first last">
<li><p class="first"><code class="docutils literal"><span class="pre">/etc/nova/rootwrap.conf</span></code></p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">/etc/sudoers.d/nova-rootwrap</span></code></p>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">/etc/nova/nova.conf</span></code></dt>
<dd><ul class="first last simple">
<li>enable <strong>lvm backend</strong> (block) instead of <strong>file backend</strong> by add <code class="docutils literal"><span class="pre">images_type</span></code> &amp; <code class="docutils literal"><span class="pre">images_volume_group</span></code></li>
<li>diable dd remove block device &#8211; <code class="docutils literal"><span class="pre">volume_clear</span> <span class="pre">=</span> <span class="pre">none</span></code></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="k">[default]</span>
<span class="na">default_ephemeral_format</span> <span class="o">=</span> <span class="s">ext4</span>

<span class="k">[libvirt]</span>
<span class="na">images_type</span> <span class="o">=</span> <span class="s">lvm</span>
<span class="na">images_volume_group</span> <span class="o">=</span> <span class="s">vgname</span>
<span class="na">volume_clear</span> <span class="o">=</span> <span class="s">none</span>
</pre></div>
</div>
<ul class="simple">
<li>policies: <code class="docutils literal"><span class="pre">/etc/nova/policy.json</span></code></li>
</ul>
<div class="highlight-json"><div class="highlight"><pre><span></span># &quot;compute:create:forced_host&quot;: &quot;is_admin:True&quot;,
&quot;compute:create:forced_host&quot;: &quot;&quot;,
</pre></div>
</div>
<ul>
<li><dl class="first docutils">
<dt>filters: <a href="#id2"><span class="problematic" id="id3">``</span></a>/etc/nova/rootwrap.d/<a href="#id4"><span class="problematic" id="id5">*</span></a>.filters</dt>
<dd><ul class="first last simple">
<li>take effect as soon as imported to this folder</li>
</ul>
</dd>
</dl>
</li>
</ul>
<div class="sidebar">
<p class="first sidebar-title"><a class="reference external" href="http://docs.openstack.org/openstack-ops/content/storage_decision.html">Storage</a></p>
<ul class="last">
<li><p class="first"><strong>Ephemeral Storage</strong> &#8211; meaning that (from the user&#8217;s point of view) they effectively disappear when a virtual machine is terminated.</p>
</li>
<li><dl class="first docutils">
<dt><strong>Persistent Storage</strong> &#8211;  means that the storage resource outlives any other resource and is always available, regardless of the state of a running instance.</dt>
<dd><ul class="first last simple">
<li>Object Storage &#8211;  users access binary objects through a REST API</li>
<li>Block Storage &#8211;  provides users with access to block-storage devices</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
</div>
<div class="section" id="management">
<h2>Management<a class="headerlink" href="#management" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="secgroup">
<h3>SecGroup<a class="headerlink" href="#secgroup" title="Permalink to this headline">Â¶</a></h3>
<ul class="simple">
<li>check infos</li>
</ul>
<div class="highlight-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span>nova secgroup-list
nova secgroup-list-rules &lt;name/id&gt;
</pre></div>
</td></tr></table></div>
<ul class="simple">
<li>add a rule</li>
</ul>
<div class="highlight-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span>nova secgroup-add-rule &lt;secgroup&gt; &lt;ip-proto&gt; &lt;from-port&gt; &lt;to-port&gt; &lt;cidr&gt;
nova secgroup-add-rule default icmp -1 -1 0.0.0.0/0
nova secgroup-add-rule default tcp <span class="m">1</span> <span class="m">65535</span> 0.0.0.0/0
nova secgroup-add-rule default udp <span class="m">1</span> <span class="m">65535</span> 0.0.0.0/0
</pre></div>
</td></tr></table></div>
<img alt="../_images/secgroup.png" src="../_images/secgroup.png" />
</div>
<div class="section" id="keypair">
<h3>KeyPair<a class="headerlink" href="#keypair" title="Permalink to this headline">Â¶</a></h3>
<div class="highlight-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span>nova keypair-add --pub_key<span class="o">=</span>file &lt;keyname&gt;
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="flavor">
<h3>Flavor<a class="headerlink" href="#flavor" title="Permalink to this headline">Â¶</a></h3>
<div class="highlight-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span>flavor-create &lt;name&gt; &lt;id&gt; &lt;ram&gt; &lt;disk&gt; &lt;vcpus&gt;
flavor-create testflavor <span class="m">6</span> <span class="m">128</span> <span class="m">0</span> 1
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="instances">
<h3>Instances<a class="headerlink" href="#instances" title="Permalink to this headline">Â¶</a></h3>
<div class="sidebar">
<p class="first sidebar-title">Note</p>
<p class="last">&#8211;min/max-count : start multiple instances
&#8211;poll : will show progress, only for 1st instance, not for multiple instances</p>
</div>
<div class="highlight-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span>nova boot <span class="o">[</span>--poll<span class="o">]</span> <span class="o">[</span>--min-count &lt;num&gt;<span class="o">]</span> <span class="o">[</span>--max-count &lt;num&gt;<span class="o">]</span> --flavor &lt;flavor&gt; --image &lt;image&gt; &lt;instance name&gt;
<span class="c1"># boot from cinder</span>
nova volume-create <span class="m">40</span> --image-id<span class="o">=</span>&lt;image_id&gt;
nova boot --flavor &lt;flavor&gt; --block-device-mapping <span class="nv">vda</span><span class="o">=</span>&lt;volume_uuid&gt;:::0 &lt;instance name&gt;
nova boot --flavor &lt;flavor&gt; --block-device <span class="nv">source</span><span class="o">=</span>image,id<span class="o">=</span>&lt;image_id&gt;,dest<span class="o">=</span>volume,size<span class="o">=</span>&lt;disk_size,unit G&gt;,shutdown<span class="o">=</span>preserve,bootindex<span class="o">=</span><span class="m">0</span> &lt;instance name&gt;
<span class="c1"># check failure instances</span>
<span class="k">for</span> i in <span class="sb">`</span>nova list <span class="p">|</span> grep bootbench <span class="p">|</span> awk <span class="s1">&#39;{print $2}&#39;</span><span class="sb">`</span><span class="p">;</span><span class="k">do</span> nova console-log <span class="nv">$i</span> <span class="p">|</span> grep login: 1&gt;/dev/null <span class="o">||</span> <span class="nb">echo</span> <span class="nv">$i</span><span class="p">;</span><span class="k">done</span>
<span class="c1"># boot instance at specified host</span>
nova boot --image &lt;uuid/name&gt; --flavor &lt;uuid/name&gt; --key-name &lt;kname&gt; --availability-zone nova:server2
</pre></div>
</td></tr></table></div>
<ul class="simple">
<li>list instances by all tenants: <code class="docutils literal"><span class="pre">nova</span> <span class="pre">list</span> <span class="pre">--all-tenants</span></code></li>
</ul>
<div class="line-block">
<div class="line">For this you will need to set your OS_PASSWORD, OS_USERNAME and OS_TENANT_NAME to an account that has the admin role in each tenant</div>
</div>
<p>If you are on a machine running the nova-api, &#8220;nova-manage vm list&#8221;
will show you all of the instances (and what nova-compute host they
are placed on)</p>
<ul class="simple">
<li>inspect an instance: <code class="docutils literal"><span class="pre">virsh</span> <span class="pre">edit</span> <span class="pre">&lt;instance/id&gt;</span></code></li>
</ul>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;disk</span> <span class="na">type=</span><span class="s">&#39;file&#39;</span> <span class="na">device=</span><span class="s">&#39;disk&#39;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;driver</span> <span class="na">name=</span><span class="s">&#39;qemu&#39;</span> <span class="na">type=</span><span class="s">&#39;qcow2&#39;</span> <span class="na">cache=</span><span class="s">&#39;none&#39;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;source</span> <span class="na">file=</span><span class="s">&#39;/opt/stack/data/nova/instances/fa0f8de4-800a-4550-8115-00da86326223/disk&#39;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;target</span> <span class="na">dev=</span><span class="s">&#39;vda&#39;</span> <span class="na">bus=</span><span class="s">&#39;virtio&#39;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;address</span> <span class="na">type=</span><span class="s">&#39;pci&#39;</span> <span class="na">domain=</span><span class="s">&#39;0x0000&#39;</span> <span class="na">bus=</span><span class="s">&#39;0x00&#39;</span> <span class="na">slot=</span><span class="s">&#39;0x04&#39;</span> <span class="na">function=</span><span class="s">&#39;0x0&#39;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/disk&gt;</span>
<span class="nt">&lt;disk</span> <span class="na">type=</span><span class="s">&#39;block&#39;</span> <span class="na">device=</span><span class="s">&#39;disk&#39;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;driver</span> <span class="na">name=</span><span class="s">&#39;qemu&#39;</span> <span class="na">type=</span><span class="s">&#39;raw&#39;</span> <span class="na">cache=</span><span class="s">&#39;none&#39;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;source</span> <span class="na">dev=</span><span class="s">&#39;/dev/disk/by-path/ip-192.168.16.10:3260-iscsi-iqn.2010-10.org.openstack:volume-386e0e48-ef30-4673-9d86-f63526f1a322-lun-1&#39;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;target</span> <span class="na">dev=</span><span class="s">&#39;vdb&#39;</span> <span class="na">bus=</span><span class="s">&#39;virtio&#39;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;serial&gt;</span>386e0e48-ef30-4673-9d86-f63526f1a322<span class="nt">&lt;/serial&gt;</span>
  <span class="nt">&lt;address</span> <span class="na">type=</span><span class="s">&#39;pci&#39;</span> <span class="na">domain=</span><span class="s">&#39;0x0000&#39;</span> <span class="na">bus=</span><span class="s">&#39;0x00&#39;</span> <span class="na">slot=</span><span class="s">&#39;0x06&#39;</span> <span class="na">function=</span><span class="s">&#39;0x0&#39;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/disk&gt;</span>
<span class="nt">&lt;disk</span> <span class="na">type=</span><span class="s">&#39;file&#39;</span> <span class="na">device=</span><span class="s">&#39;cdrom&#39;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;driver</span> <span class="na">name=</span><span class="s">&#39;qemu&#39;</span> <span class="na">type=</span><span class="s">&#39;raw&#39;</span> <span class="na">cache=</span><span class="s">&#39;none&#39;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;source</span> <span class="na">file=</span><span class="s">&#39;/opt/stack/data/nova/instances/fa0f8de4-800a-4550-8115-00da86326223/disk.config&#39;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;target</span> <span class="na">dev=</span><span class="s">&#39;hdd&#39;</span> <span class="na">bus=</span><span class="s">&#39;ide&#39;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;readonly/&gt;</span>
  <span class="nt">&lt;address</span> <span class="na">type=</span><span class="s">&#39;drive&#39;</span> <span class="na">controller=</span><span class="s">&#39;0&#39;</span> <span class="na">bus=</span><span class="s">&#39;1&#39;</span> <span class="na">target=</span><span class="s">&#39;0&#39;</span> <span class="na">unit=</span><span class="s">&#39;1&#39;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/disk&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="services">
<h3>Services<a class="headerlink" href="#services" title="Permalink to this headline">Â¶</a></h3>
<ul>
<li><dl class="first docutils">
<dt>multiple nova compute backends need multiple n-cpu daemons</dt>
<dd><ul class="first last simple">
<li><a class="reference external" href="https://blueprints.launchpad.net/nova/+spec/multi-back-ends-for-nova-compute">https://blueprints.launchpad.net/nova/+spec/multi-back-ends-for-nova-compute</a></li>
</ul>
</dd>
</dl>
</li>
</ul>
<div class="highlight-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># disable services</span>
<span class="k">for</span> i in <span class="sb">`</span>seq <span class="m">10</span> 15<span class="sb">`</span><span class="p">;</span><span class="k">do</span> nova service-disable --reason<span class="o">=</span>testboot r16s<span class="nv">$i</span> nova-compute<span class="p">;</span><span class="k">done</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="quota">
<h3>quota<a class="headerlink" href="#quota" title="Permalink to this headline">Â¶</a></h3>
<ul class="simple">
<li>-1 mean infinite</li>
<li><code class="docutils literal"><span class="pre">nova</span> <span class="pre">quota-show</span> <span class="pre">--user</span> <span class="pre">&lt;user&gt;</span> <span class="pre">--tenant</span> <span class="pre">&lt;tenant&gt;</span></code></li>
<li><code class="docutils literal"><span class="pre">nova</span> <span class="pre">quota-update</span> <span class="pre">--cores=&lt;num&gt;</span> <span class="pre">--ram=&lt;num&gt;</span> <span class="pre">&lt;tenant_name/tid&gt;</span></code></li>
</ul>
<div class="highlight-bash"><div class="highlight"><pre><span></span>nova quota-update --cores<span class="o">=</span><span class="m">400</span> --ram<span class="o">=</span><span class="m">1310720</span> admin
nova quota-show --user admin --tenant admin
</pre></div>
</div>
<div class="section" id="issues">
<h4>issues<a class="headerlink" href="#issues" title="Permalink to this headline">Â¶</a></h4>
<ol class="arabic simple">
<li>user xxx is unauthorized for tenent yyy</li>
</ol>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">stack@r16s01:~/devstack$</span> nova boot --image <span class="si">${</span><span class="nv">IMAGE</span><span class="si">}</span> --flavor m1.tiny <span class="si">${</span><span class="nv">INSTANCE</span><span class="si">}</span> --    availability-zone nova:r16s03
<span class="go">ERROR (Unauthorized): User d8b90ec35da147ac8ca608253504a089 is unauthorized for tenant     2638cc4008a149a58c7a23df282af954 (Disable debug mode to suppress these details.) (HTTP 401) (Request-ID: req-32404359-fb4b-414f-b635-2f5451d1ebe0)</span>
</pre></div>
</div>
<ul class="simple">
<li>Solution: add <strong>demo</strong> to project <strong>admin</strong></li>
</ul>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="sahara/index.html" class="btn btn-neutral float-right" title="Sahara" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="openstack/index.html" class="btn btn-neutral" title="OpenStack" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, JetChars.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'alpha',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>