

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Virtualization &mdash; JetChars alpha documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="JetChars alpha documentation" href="../../index.html"/>
        <link rel="next" title="Shell" href="shell.html"/>
        <link rel="prev" title="Linux Package Management" href="linux_pkg.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> JetChars
          

          
          </a>

          
            
            
              <div class="version">
                0.1.7
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../cloud_computing.html">Cloud Computing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws/index.html">AWS &#8211; Amazon Web Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws_vpn/index.html">Build VPN with AWS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docker/index.html">Docker</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ceph/ceph.html">Ceph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ceph/ceph_deploy.html">Ceph Deploy</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../openstack/index.html">OpenStack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nova.html">Nova</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sahara/index.html">Sahara</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kvm_optimization/index.html">KVM Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devstack/index.html">DevStack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devstack_dvr/index.html">DevStack with DVR</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devstack_t13g/index.html">DevStack Trouble Shooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../o7k_docker/index.html">OpenStack &amp; Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../osp7_director.html">OpenStack Platform 7 Director</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../hadoop/index.html">Hadoop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hadoop_conf_tuning/index.html">Hadoop Configuration Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hadoop_hibench/index.html">HiBench - The Hadoop BenchMark Suit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doopshot/index.html">DoopShot</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="freebsd.html">FreeBSD</a></li>
<li class="toctree-l1"><a class="reference internal" href="linux.html">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="linux_disk.html">Linux Disk</a></li>
<li class="toctree-l1"><a class="reference internal" href="linux_doc.html">Documentation Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="linux_info.html">Get System Infos</a></li>
<li class="toctree-l1"><a class="reference internal" href="linux_net.html">Linux Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="linux_pkg.html">Linux Package Management</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Virtualization</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#hypervisors">Hypervisors</a></li>
<li class="toctree-l2"><a class="reference internal" href="#libvirt">Libvirt</a></li>
<li class="toctree-l2"><a class="reference internal" href="#kvm">KVM</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#nested-kvm">nested KVM</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#virsh-virtualization-management-interface">Virsh &#8211; Virtualization Management Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id2">TI Calculators</a></li>
<li class="toctree-l2"><a class="reference internal" href="#docker">Docker</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="shell.html">Shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="ubuntu.html">Ubuntu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pxe/index.html">PXE &#8211; Preboot Execution Enviriment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../screen/index.html">Screen - Full-screen window manager</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../git.html">Git &#8211; Extraordinary version contrl software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../github/index.html">GitHub &#8211; Git repository hosting service</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../regex/index.html">Regular Expression</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sql/index.html">SQL &#8211; Structured Query Language</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../rst.html">reStructured Text (rst)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../md.html">MarkDown (md)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../svg/index.html">Scalable Vector Graphics (SVG)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../netease_homework/os.html">Operating System</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../sort.html">Sorting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data_structure.html">Review DataStructure with Pics</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../amqp/index.html">AMQP &#8211; Advanced Message Queuing Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rest/index.html">RESTful API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../microservices/index.html">MicroServices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../windows/index.html">Windows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mac.html">Mac as Main OS</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../kickstart/index.html">Kickstart Documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">JetChars</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
    <li>Virtualization</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/docs/linux/linux_virt.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="virtualization">
<h1>Virtualization<a class="headerlink" href="#virtualization" title="Permalink to this headline">¶</a></h1>
<div class="section" id="hypervisors">
<h2>Hypervisors<a class="headerlink" href="#hypervisors" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="libvirt">
<h2>Libvirt<a class="headerlink" href="#libvirt" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line">libvirt is an open source API, daemon and management tool for managing platform virtualization. It can be used to manage KVM, Xen, VMware ESX, QEMU and other virtualization technologies. These APIs are widely used in the orchestration layer of hypervisors in the development of a cloud-based solution. <a class="footnote-reference" href="#id3" id="id1">[1]</a></div>
<div class="line"><br /></div>
<div class="line">It will create a linuxbridge <strong>virbr0</strong> , counterpart is <strong>xenbr0</strong> for xen, <strong>vif0.0</strong> for xen guest, <strong>peth0</strong> for xen kernel.</div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">/usr/sbin/libivirtd</span> <span class="pre">-d</span></code> is a background process</li>
<li><code class="docutils literal"><span class="pre">/var/log/libvirt/libvirtd.log</span></code> default log file</li>
<li><code class="docutils literal"><span class="pre">libvirt.xml</span></code> every instance has a conf file</li>
<li>hvm (hardware virtual machine)</li>
<li>pvm (parallel virtual machine)</li>
</ul>
<img src="../../_images/libvirt_support.svg" /></div>
<div class="section" id="kvm">
<h2>KVM<a class="headerlink" href="#kvm" title="Permalink to this headline">¶</a></h2>
<div class="section" id="nested-kvm">
<h3>nested KVM<a class="headerlink" href="#nested-kvm" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">not enabled by default, would be useful for cases need build vm inside vm, eg: OpenStack-on-OpenStack (tripleO)</div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<ul class="simple">
<li>For Intel CPU</li>
</ul>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> cat /sys/module/kvm_intel/parameters/nested
<span class="go">N</span>

<span class="gp">#</span> rmmod kvm-intel
<span class="gp">#</span> <span class="nb">echo</span> <span class="s2">&quot;options kvm-intel nested=y&quot;</span> &gt; /etc/modprobe.d/dist.conf
<span class="gp">#</span> modprobe kvm-intel

<span class="gp">#</span> cat /sys/module/kvm_intel/parameters/nested
<span class="go">Y</span>
</pre></div>
</div>
<ul class="simple">
<li>For AMD CPU</li>
</ul>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> cat /sys/module/kvm_amd/parameters/nested
<span class="go">0</span>

<span class="gp">#</span> rmmod kvm-amd
<span class="gp">#</span> <span class="nb">echo</span> <span class="s2">&quot;options kvm-amd nested=1&quot;</span> &gt; /etc/modprobe.d/dist.conf
<span class="gp">#</span> modprobe kvm-amd

<span class="gp">#</span> cat /sys/module/kvm_amd/parameters/nested
<span class="go">1</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="virsh-virtualization-management-interface">
<h2>Virsh &#8211; Virtualization Management Interface<a class="headerlink" href="#virsh-virtualization-management-interface" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">command</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>create</td>
<td>create an domain from xml(direct into running state)</td>
</tr>
<tr class="row-odd"><td>define/undefine</td>
<td>define or undefine won&#8217;t into running state</td>
</tr>
<tr class="row-even"><td>destroy</td>
<td>stop vm immediately, but not delete domain</td>
</tr>
<tr class="row-odd"><td>shutdown</td>
<td>soft stop vm</td>
</tr>
<tr class="row-even"><td>list</td>
<td>show active domain list, &#8211;all (show include inactive)</td>
</tr>
<tr class="row-odd"><td>edit &lt;ID/name&gt;</td>
<td>modify guest&#8217;s xml file</td>
</tr>
<tr class="row-even"><td>dumpxml xxx.xml</td>
<td>output guest&#8217;s xml</td>
</tr>
<tr class="row-odd"><td>connect</td>
<td>connect vm</td>
</tr>
<tr class="row-even"><td>vncdisplay vm</td>
<td>create a vnc link for vm</td>
</tr>
<tr class="row-odd"><td>console vm</td>
<td>connect the pty console of vm</td>
</tr>
</tbody>
</table>
<div class="highlight-guess"><div class="highlight"><pre><span></span>virsh edit instanceid
</pre></div>
</div>
</div>
<div class="section" id="id2">
<h2><a class="reference external" href="http://www.ticalc.org/basics/calculators/index.html">TI Calculators</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>buntch of TI&#8217;s calculators can run in emulators at mac/linux/windows.</p>
</div>
<div class="section" id="docker">
<h2>Docker<a class="headerlink" href="#docker" title="Permalink to this headline">¶</a></h2>
<ul>
<li><dl class="first docutils">
<dt>Concept</dt>
<dd><ul class="first last simple">
<li>must have same os kernel</li>
<li>native CPU/syscall/kernel</li>
<li>use go language</li>
<li>can&#8217;t over commitment</li>
<li>lightweight &#8216;vm&#8217;</li>
</ul>
</dd>
</dl>
</li>
</ul>
<p><a class="reference external" href="https://www.docker.com/tryit/">Interactive Tutorial</a></p>
<table class="docutils footnote" frame="void" id="id3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td><a class="reference external" href="http://en.wikipedia.org/wiki/Libvirt">http://en.wikipedia.org/wiki/Libvirt</a></td></tr>
</tbody>
</table>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="shell.html" class="btn btn-neutral float-right" title="Shell" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="linux_pkg.html" class="btn btn-neutral" title="Linux Package Management" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, JetChars.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'alpha',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>